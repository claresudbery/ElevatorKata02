# ElevatorKata01
elevator kata - second attempt 

In this version, I use a LiftEventGenerator class as the single source of events.
This creates an easy way of faking events for test purposes, and means that we don't have to have any Thread.Sleep calls in tests.

I strongly suspect this one is a crazy way of doing things (the code at the moment feels very tortuous), but I'm trying it anyway as a kind of intellectual* exercise.
*self-indulgent

The kata itself (see http://blog.milesburton.com/2013/03/28/elevator-kata-mind-bending-pairing-exercise/):

- An elevator responds to calls containing a source floor and direction
- An elevator delivers passengers to requested floors
- Elevator calls are queued not necessarily FIFO
- You may validate passenger floor requests
- you may implement current floor monitor
- you may implement direction arrow
- you may implement doors (opening and closing)
- you may implement DING!
- there can be more than one elevator
- ?? Max number of lift occupants?

Related links:

http://www.quora.com/Is-there-any-public-elevator-scheduling-algorithm-standard

http://www.quora.com/Why-are-virtually-all-elevator-algorithms-so-inefficient

Paternoster: https://www.youtube.com/watch?v=Ro3Fc_yG3p0

Current issues:

1. The LiftEventGenerator class 
The LiftEventGenerator class is used for requests made by lift users AND lift engine events.
This is unnecessary. The lift engine should be represented by a separate class, and should have its own suite of tests.
The current test structure would still work - In the "Act" part of the tests, calls to OnNext could alternate 
between external sources (requests from lift users) and lift engine events.

2. Using a scheduler for tests
This may still be needed for integration tests, when testing events in real time.
For unit tests, it is not needed because we just call OnNext in order to model events happening in a particular order.

3. Speaking of integration tests...
Do we need them at this point? SHould they effectively be acceptance tests for the system as a whole?
If we're adding acceptance tests, do we need to create some kind of simple UI?
If so, what form should this take? There's a limit to how far we can get with a console app (see below), but it might end up being a major distraction.
Creating a UI is potentially tons of work! 
The point of the kata is to work out the logic of the lift moving between floors.
All of this can be covered by unit tests, so we should stick with this for now.
If acceptance / integration tests are written, they can just be one level up 
- ie instantiate the lift class with a real lift engine, instead of a faked one
- and then just check the lift status events that are generated by the lift.
The challenge here will be getting the scheduler to respond to generated lift-movement events
- eg we might not want a particular user to call the lift until we know the lift has moved past the second floor
There is an article here about using schedulers for testing:
http://www.introtorx.com/content/v1.0.10621.0/16_TestingRx.html

4. UI via console
You want to see the lift arrive at different floors. 
You want to see different lift users on different floors.
You want those users to be ale to interact with the lift.
You want users to be able to enter the lift and move to a different floor.